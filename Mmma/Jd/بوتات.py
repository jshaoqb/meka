import asyncio
import random
from asyncio.exceptions import TimeoutError

from telethon import events
from telethon.errors.rpcerrorlist import YouBlockedUserError

from jepthon import jepthon

# Ø§Ù„ÙŠ ÙŠØ®Ù…Ø· ÙˆÙŠÙƒÙˆÙ„ Ù…Ù† ÙƒØªØ§Ø¨ØªÙŠ Ø§Ù„Ø§ Ø§Ù…Ù‡ Ø§Ù†ÙŠØ¬Ù‡ ÙˆÙ‚Ø¯ Ø§Ø¹Ø°Ø± Ù…Ù† Ø§Ù†Ø°Ø±
@jepthon.on(admin_cmd(pattern="Ø­Ø§Ù„ØªÙŠ ?(.*)"))
async def _(event):
    await event.edit("**- ÙŠØªÙ… Ø§Ù„ØªØ§ÙƒØ¯ Ù…Ù† Ø­Ø§Ù„ØªÙƒ Ø§Ø°Ø§ ÙƒÙ†Øª Ù…Ø­Ø¸ÙˆØ± Ø§Ùˆ Ù„Ø§**")
    async with bot.conversation("@SpamBot") as conv:
        try:
            response = conv.wait_event(
                events.NewMessage(incoming=True, from_users=178220800)
            )
            await conv.send_message("/start")
            response = await response
            await bot.send_read_acknowledge(conv.chat_id)
        except YouBlockedUserError:
            await event.edit("** Ø§ÙˆÙ„Ø§ Ø§Ù„ØºÙŠ Ø­Ø¸Ø± @SpamBot ÙˆØ­Ø§ÙˆÙ„ Ù…Ø¬Ø¯Ø¯Ø§**")
            return
        await event.edit(f"- {response.message.message}\n @jepthon")


@jepthon.on(admin_cmd(pattern="Ø§Ù„Ø§ØºÙ†ÙŠØ© ?(.*)"))
async def _(event):
    "To reverse search music by bot."
    if not event.reply_to_msg_id:
        return await event.edit("**â–¾âˆ® ÙŠØ¬Ø¨ Ø§Ù„Ø±Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø§ØºÙ†ÙŠÙ‡ Ø§ÙˆÙ„Ø§**")
    reply_message = await event.get_reply_message()
    chat = "@auddbot"
    try:
        async with event.client.conversation(chat) as conv:
            try:
                await event.edit("**â–¾âˆ® ÙŠØªÙ… Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø§ØºÙ†ÙŠØ© Ø§Ù†ØªØ¸Ø±**")
                start_msg = await conv.send_message("/start")
                response = await conv.get_response()
                send_audio = await conv.send_message(reply_message)
                check = await conv.get_response()
                if not check.text.startswith("Audio received"):
                    return await event.edit(
                        "**â–¾âˆ® ÙŠØ¬Ø¨ Ø§Ù† ÙŠÙƒÙˆÙ† Ø­Ø¬Ù… Ø§Ù„Ø§ØºÙ†ÙŠÙ‡ Ù…Ù† 5 Ø§Ù„Ù‰ 10 Ø«ÙˆØ§Ù†ÙŠ **."
                    )
                await event.edit("- Ø§Ù†ØªØ¸Ø± Ù‚Ù„ÙŠÙ„Ø§")
                result = await conv.get_response()
                await event.client.send_read_acknowledge(conv.chat_id)
            except YouBlockedUserError:
                await event.edit("```Mohon buka blokir (@auddbot) dan coba lagi```")
                return
            namem = f"**Ø§Ù„Ø£ØºÙ†ÙŠØ© : **{result.text.splitlines()[0]}\
        \n\n**Ø§Ù„ØªÙØ§ØµÙŠÙ€Ù„ : **{result.text.splitlines()[2]}"
            await event.edit(namem)
            await event.client.delete_messages(
                conv.chat_id,
                [start_msg.id, send_audio.id, check.id, result.id, response.id],
            )
    except TimeoutError:
        return await event.edit("***Ø­Ø¯Ø« Ø®Ø·Ø§ Ù…Ø§ Ø­Ø§ÙˆÙ„ Ù…Ø¬Ø¯Ø¯Ø§**")


@jepthon.on(admin_cmd(pattern="Ø§ÙŠÙ…ÙŠÙ„ ÙˆÙ‡Ù…ÙŠ(?: |$)(.*)"))
async def _(event):
    chat = "@TempMailBot"
    geez = await event.edit("**Ø¬Ø§Ø±ÙŠ Ø§Ù†Ø´Ø§Ø¡ Ø¨Ø±ÙŠØ¯ ...**")
    async with bot.conversation(chat) as conv:
        try:
            response = conv.wait_event(
                events.NewMessage(incoming=True, from_users=220112646)
            )
            await conv.send_message("/start")
            await asyncio.sleep(1)
            await conv.send_message("/create")
            response = await response
            jepthon = (response).reply_markup.rows[2].buttons[0].url
            await event.client.send_read_acknowledge(conv.chat_id)
        except YouBlockedUserError:
            await geez.edit("**Ø§Ù„ØºÙŠ Ø­Ø¸Ø± @TempMailBot  Ùˆ Ø­Ø§ÙˆÙ„ Ù…Ø¬Ø¯Ø¯Ø§**")
            return
        await event.edit(
            f"Ø§Ù„Ø§ÙŠÙ…ÙŠÙ„ Ø§Ù„Ø®Ø§Øµ Ù‡Ùˆ `{response.message.message}`\n[ Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„Ø±Ø¤ÙŠØ© Ù…Ù† Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø§ÙŠÙ…ÙŠÙ„ Ø§Ù„ÙˆØ§Ø±Ø¯Ø©]({jepthon})"
        )

@bot.on(admin_cmd(pattern="Ø¯Ø±ÙŠØ³ ?(.*)"))
async def _(event):
    if event.reply_to_msg_id:
        return
    input_str = event.pattern_match.group(1)
    reply_to_id = await reply_id(event)
    if event.reply_to_msg_id and not event.pattern_match.group(1):
        reply_to_id = await event.get_reply_message()
        reply_to_id = str(reply_to_id.message)
    else:
        reply_to_id = str(event.pattern_match.group(1))
    if not reply_to_id:
        return await edit_or_reply(
            event, "**â•® .Ø¯Ø±ÙŠØ³ + Ø§Ø³Ù… Ø§Ù„Ù†Ø§Ø¯ÙŠ + Ø§Ø³Ù…Ùƒ Ø¨Ù„Ø§Ù†Ø¬Ù„ÙŠØ²ÙŠ + Ø±Ù‚Ù…Ùƒ Ø§Ù„Ù…ÙØ¶Ù„ ... Ù„ØªØµÙ…ÙŠÙ… Ø¯Ø±ÙŠØ³ ...â•°**"
        )
    chat = "@Jepthon1BoT"
    catevent = await edit_or_reply(event, "**â•®â€¢âš Ø§ØµØ¨Ø± Ø¬Ø§ÙŠ Ù†Ø®ÙŠØ· Ø¨Ø¯Ø±ÙŠØ³Ùƒ ... ğŸ§¸ğŸˆ**")
    async with event.client.conversation(chat) as conv:
        try:
            response = conv.wait_event(
                events.NewMessage(incoming=True, from_users=2034059015)
            )
            await event.client.send_message(chat, "{}".format(input_str))
            response = await response
            await event.client.send_read_acknowledge(conv.chat_id)
        except YouBlockedUserError:
            await catevent.edit("**â•®â€¢âš ØªØ­Ù€Ù‚Ù‚ Ù…Ù† Ø§Ù†Ù€Ùƒ Ù„Ù… ØªÙ‚Ù€Ù… Ø¨Ø­Ø¸Ø± Ø§Ù„Ø¨ÙˆØª @Jepthon1BoT .. Ø«Ù… Ø§Ø¹Ù€Ø¯ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø§Ù…Ù€Ø± ...ğŸ¤–â™¥ï¸**")
            return
        if response.text.startswith("I can't find that"):
            await catevent.edit("**â•®â€¢âš Ø¹Ù€Ø°Ø±Ø§Ù‹ .. Ù„Ù€Ù… Ø§Ø³ØªØ·Ù€Ø¹ Ø§ÙŠØ¬Ù€Ø§Ø¯ Ø§Ù„Ù…Ø·Ù„Ù€ÙˆØ¨ â˜¹ï¸ğŸ’”**")
        else:
            await catevent.delete()
            await event.client.send_message(event.chat_id, response.message)


@bot.on(admin_cmd(pattern="Ø¨Ø±Ø¬ ?(.*)"))
async def _(event):

    if event.reply_to_msg_id:
        return
    input_str = event.pattern_match.group(1)
    reply_to_id = await reply_id(event)
    if event.reply_to_msg_id and not event.pattern_match.group(1):
        reply_to_id = await event.get_reply_message()
        reply_to_id = str(reply_to_id.message)
    else:
        reply_to_id = str(event.pattern_match.group(1))
    if not reply_to_id:
        return await edit_or_reply(
            event, "**â•® .Ø¨Ø±Ø¬ + Ø§Ø³Ù… Ø¨Ø±Ø¬Ùƒ ... ...â•°**"
        )
    chat = "@TermexJepBoT"
    catevent = await edit_or_reply(event, "**â•®â€¢âš Ø§ØµØ¨Ø± Ø¬Ø§ÙŠ Ù†Ø·Ù„Ø¹ Ø¨Ø±Ø¬Ùƒ ... ğŸ§¸ğŸˆ**")
    async with event.client.conversation(chat) as conv:
        try:
            response = conv.wait_event(
                events.NewMessage(incoming=True, from_users=2142702957)
            )
            await event.client.send_message(chat, "{}".format(input_str))
            response = await response
            await event.client.send_read_acknowledge(conv.chat_id)
        except YouBlockedUserError:
            await catevent.edit("**â•®â€¢âš ØªØ­Ù€Ù‚Ù‚ Ù…Ù† Ø§Ù†Ù€Ùƒ Ù„Ù… ØªÙ‚Ù€Ù… Ø¨Ø­Ø¸Ø± Ø§Ù„Ø¨ÙˆØª @TermexJepBoT .. Ø«Ù… Ø§Ø¹Ù€Ø¯ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø§Ù…Ù€Ø± ...ğŸ¤–â™¥ï¸**")
            return
        if response.text.startswith("I can't find that"):
            await catevent.edit("**â•®â€¢âš Ø¹Ù€Ø°Ø±Ø§Ù‹ .. Ù„Ù€Ù… Ø§Ø³ØªØ·Ù€Ø¹ Ø§ÙŠØ¬Ù€Ø§Ø¯ Ø§Ù„Ù…Ø·Ù„Ù€ÙˆØ¨ â˜¹ï¸ğŸ’”**")
        else:
            await catevent.delete()
            await event.client.send_message(event.chat_id, response.message)
@jepthon.on(admin_cmd(outgoing=True, pattern="ØºÙ†ÙŠÙ„ÙŠ$"))
async def jepvois(vois):
  rl = random.randint(3,267)
  url = f"https://t.me/DwDi1/{rl}"
  await vois.client.send_file(vois.chat_id,url,caption="âŒ¯ï¸™BY : @JEPTHON ğŸ€",parse_mode="html")
  await vois.delete()

@jepthon.on(admin_cmd(outgoing=True, pattern="Ø´Ø¹Ø±$"))
async def jepvois(vois):
  rl = random.randint(2,101)
  url = f"https://t.me/L1BBBL/{rl}"
  await vois.client.send_file(vois.chat_id,url,caption="âŒ¯ï¸™BY : @JEPTHON ğŸ€",parse_mode="html")
  await vois.delete()
@jepthon.on(admin_cmd(outgoing=True, pattern="Ù‚Ø±Ø§Ù†$"))
async def jepvois(vois):
  rl = random.randint(2,101)
  url = f"https://t.me/QuraanJep/{rl}"
  await vois.client.send_file(vois.chat_id,url,caption="âŒ¯ï¸™BY : @JEPTHON ğŸ¤²ğŸ»â˜ªï¸",parse_mode="html")
  await vois.delete()
@jepthon.on(admin_cmd(outgoing=True, pattern="Ø«ÙŠÙ…$"))
async def jepThe(theme):
  rl = random.randint(2,510)
  url = f"https://t.me/GSSSD/{rl}"
  await theme.client.send_file(theme.chat_id,url,caption="âŒ¯ï¸™THEME BY : @JEPTHON ğŸŠ",parse_mode="html")
  await theme.delete()
